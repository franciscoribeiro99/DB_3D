// If you update this, you need to run "npm run generate" to regenerate prisma auto completion

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DISTANT_DATABASE")
}

model City {
  cityid   Int        @id @unique @default(autoincrement())
  city     String
  zip      Int
  Customer Customer[]

  @@unique([city, zip], name: "CityZipUnique")
  @@map("city")
}

model Customer {
  customerid Int     @id @unique @default(autoincrement())
  fname      String
  lname      String
  email      String
  address    String
  cityid     Int
  city       City    @relation(fields: [cityid], references: [cityid])
  order      Order[]

  @@map("customer")
}

model Status {
  statusid Int     @id @unique @default(autoincrement())
  status   String
  Order    Order[]
}

model Order {
  orderid    Int      @id @unique @default(autoincrement())
  statusid   Int
  status     Status   @relation(fields: [statusid], references: [statusid])
  customerid Int
  finalprice Int
  customer   Customer @relation(fields: [customerid], references: [customerid])

  @@unique([orderid, customerid], name: "OrderIdentifier")
  @@map("orders")
}

model Material {
  materialid            Int                            @id @unique @default(autoincrement())
  name                  String
  price                 Int
  color                 String
  stock                 Int
  materitype            String
  printerscompatibility PrinterMaterialcompatibility[]

  @@map("material")
}

model Printers {
  printerid          Int                            @id @unique @default(autoincrement())
  name               String
  printertype        String
  printx             Int
  printy             Int
  printz             Int
  materialcompatible PrinterMaterialcompatibility[]

  @@map("printers")
}

model PrinterMaterialcompatibility {
  printerid  Int
  materialid Int
  material   Material @relation(fields: [materialid], references: [materialid])
  printer    Printers @relation(fields: [printerid], references: [printerid])

  @@unique([printerid, materialid], name: "PrinterMaterialIdentifier")
  @@map("printermaterialcompatibility")
}
